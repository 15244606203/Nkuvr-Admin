<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Nkuvr 后台管理系统</title>
</head>
<body>
<div class="login" style="text-align: center">
    <form>
        <h3>用户名密码登录</h3>
        <table>
            <label for="username"></label><input id="username" name="username" type="text"
                                                 placeholder="用户名"/><br><br>
            <label for="password"></label><input id="password" name="password" type="password"
                                                 placeholder="密码"/><br><br>
            <a href="javascript:void(0);" onclick="return doLogin();">登录</a>
        </table>
    </form>
</div>
<script src="https://cdn.bootcss.com/jquery/3.5.0/jquery.min.js"></script>
<script src="layer/layer.js"></script>
<script type="text/javascript">
    function doLogin() {
        var username = $("#username").val();
        var password = $("#password").val();
        var loadingIndex = null;
        if (username === "") {
            layer.msg("用户名不能为空，请输入!", {time: 1000, icon: 5, shift: 6});
            return;
        }
        if (password === "") {
            layer.msg("密码不能为空，请输入!", {time: 1000, icon: 5, shift: 6});
            return;
        }
        $.ajax({
            type: "post",
            url: "/doLogin",
            async: false,
            dataType: "json",
            data: {
                "username": username,
                "password": password
            },
            beforeSend: function () {
                loadingIndex = layer.msg("处理中", {icon: 16});
            },
            success: function (result) {
                layer.close(loadingIndex);
                if (result.success) {
                    layer.msg("登录成功", {time: 1000, icon: 6})
                    window.location.href = "/user/list";
                } else {
                    layer.msg("用户名或密码错误，请重新输入", {time: 1000, icon: 5, shift: 6});
                }
            }
        });
    }
</script>
</body>
</html>