<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Nkuvr 后台管理系统</title>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/signin.css">
</head>
<body>
<div class="container">
    <form class="form-signin">
        <h2 class="form-signin-heading">用户名密码登录</h2>
        <label for="username" class="sr-only"></label>
        <input type="text" id="username" class="form-control" placeholder="请输入用户名">
        <label for="password" class="sr-only"></label>
        <input type="password" id="password" class="form-control" placeholder="请输入密码">
        <div class="checkbox">
            <label>
                <input type="checkbox" value="remember-me"> 记住我
            </label>
        </div>
        <a class="btn btn-lg btn-primary btn-block" href="javascript:void(0);" onclick="return doLogin();">登录</a>
    </form>

</div>

<script src="https://cdn.bootcss.com/jquery/3.5.0/jquery.min.js"></script>
<script src="layer/layer.js"></script>
<script type="text/javascript">
    function doLogin() {
        var username = $("#username").val();
        var password = $("#password").val();
        var loadingIndex = null;
        if (username === "") {
            layer.msg("用户名不能为空，请输入!", {time: 1000, icon: 5, shift: 6});
            return;
        }
        if (password === "") {
            layer.msg("密码不能为空，请输入!", {time: 1000, icon: 5, shift: 6});
            return;
        }
        $.ajax({
            type: "post",
            url: "/doLogin",
            async: false,
            dataType: "json",
            data: {
                "username": username,
                "password": password
            },
            beforeSend: function () {
                loadingIndex = layer.msg("处理中", {icon: 16});
            },
            success: function (result) {
                layer.close(loadingIndex);
                if (result.success) {
                    layer.msg("登录成功", {time: 1000, icon: 6})
                    window.location.href = "/user/list";
                } else {
                    layer.msg("用户名或密码错误，请重新输入", {time: 1000, icon: 5, shift: 6});
                }
            }
        });
        return false;
    }
</script>
</body>
</html>